# ğŸ¨ System Architecture Diagrams

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER MOBILE APP                          â”‚
â”‚                     (React Native / Expo)                       â”‚
â”‚                                                                 â”‚
â”‚  Features:                                                      â”‚
â”‚  â€¢ Search destination                                           â”‚
â”‚  â€¢ View parking recommendations                                 â”‚
â”‚  â€¢ Navigate to parking spot                                     â”‚
â”‚  â€¢ Book parking slot                                            â”‚
â”‚  â€¢ QR code entry/exit                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP REST API
                         â”‚ JSON Request/Response
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND API SERVER                           â”‚
â”‚              (Node.js + TypeScript + Express)                   â”‚
â”‚                                                                 â”‚
â”‚  Modules:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Recommendation  â”‚  â”‚   Parking Spot   â”‚                   â”‚
â”‚  â”‚    Engine        â”‚  â”‚   Management     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚    Booking       â”‚  â”‚    Vehicle       â”‚                   â”‚
â”‚  â”‚    System        â”‚  â”‚  Verification    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Authentication  â”‚  â”‚     Wallet       â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                    â”‚                   â”‚
     â”‚ HTTP               â”‚ SQL               â”‚ WebSocket (future)
     â–¼                    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ML SERVICE  â”‚    â”‚  PostgreSQL  â”‚    â”‚  OpenCV/IoT  â”‚
â”‚   (Flask +   â”‚    â”‚   Database   â”‚    â”‚  Real-time   â”‚
â”‚   XGBoost)   â”‚    â”‚   (Prisma)   â”‚    â”‚  Slot Status â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Recommendation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User Input                                                   â”‚
â”‚    â€¢ Current Location: (18.5204, 73.8567)                      â”‚
â”‚    â€¢ Destination: (18.5324, 73.8467)                           â”‚
â”‚    â€¢ Vehicle Type: "car"                                        â”‚
â”‚    â€¢ Radius: 3 km                                               â”‚
â”‚    â€¢ Arrival Time: +15 minutes                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Geospatial Search (geospatial.service.ts)                   â”‚
â”‚    â€¢ Calculate Haversine distance to all parking spots          â”‚
â”‚    â€¢ Filter spots within 3 km radius                           â”‚
â”‚    â€¢ Sort by distance                                           â”‚
â”‚    Result: Found 5 parking spots nearby                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Data Collection (for each spot)                             â”‚
â”‚                                                                 â”‚
â”‚  A. Real-time Slot Status (from Database)                      â”‚
â”‚     â€¢ Total Slots: 60                                           â”‚
â”‚     â€¢ Free Slots: 45                                            â”‚
â”‚     â€¢ Occupied: 15                                              â”‚
â”‚     â€¢ Current Occupancy Rate: 25%                               â”‚
â”‚                                                                 â”‚
â”‚  B. Area Metadata (POI Analysis)                               â”‚
â”‚     â€¢ Office POIs nearby: 30                                    â”‚
â”‚     â€¢ Restaurant POIs: 5                                        â”‚
â”‚     â€¢ Store POIs: 2                                             â”‚
â”‚     â†’ Area Type: IT/Commercial                                  â”‚
â”‚                                                                 â”‚
â”‚  C. Time Context                                                â”‚
â”‚     â€¢ Current Time: 14:00                                       â”‚
â”‚     â€¢ Arrival Time: 14:15                                       â”‚
â”‚     â€¢ Day: Monday (weekday = 1)                                 â”‚
â”‚     â€¢ Weather: Sunny                                            â”‚
â”‚     â€¢ Event: None                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ML Prediction (via ML Service)                              â”‚
â”‚                                                                 â”‚
â”‚    POST http://localhost:5001/predict/batch                    â”‚
â”‚    {                                                            â”‚
â”‚      "spots": [                                                 â”‚
â”‚        {                                                        â”‚
â”‚          "spot_id": "PICT-001",                                â”‚
â”‚          "slot_type": "car",                                    â”‚
â”‚          "hour": 14,                                            â”‚
â”‚          "weekday": 1,                                          â”‚
â”‚          "weather": "sunny",                                    â”‚
â”‚          "event_type": "none",                                  â”‚
â”‚          "poi_office_count": 30,                               â”‚
â”‚          "poi_restaurant_count": 5,                            â”‚
â”‚          "poi_store_count": 2                                  â”‚
â”‚        },                                                       â”‚
â”‚        ...                                                      â”‚
â”‚      ]                                                          â”‚
â”‚    }                                                            â”‚
â”‚                                                                 â”‚
â”‚    XGBoost Model Processing:                                    â”‚
â”‚    â€¢ Cyclical encoding (hour, weekday)                         â”‚
â”‚    â€¢ Label encoding (categorical features)                      â”‚
â”‚    â€¢ Feature alignment                                          â”‚
â”‚    â€¢ Predict probabilities                                      â”‚
â”‚                                                                 â”‚
â”‚    Response:                                                    â”‚
â”‚    {                                                            â”‚
â”‚      "predictions": [                                           â”‚
â”‚        {                                                        â”‚
â”‚          "spot_id": "PICT-001",                                â”‚
â”‚          "prob_free": 0.65,                                    â”‚
â”‚          "prob_occupied": 0.35,                                â”‚
â”‚          "confidence": 0.87                                     â”‚
â”‚        },                                                       â”‚
â”‚        ...                                                      â”‚
â”‚      ]                                                          â”‚
â”‚    }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Scoring Algorithm (recommendation.service.ts)               â”‚
â”‚                                                                 â”‚
â”‚    For PICT Main Campus Parking:                               â”‚
â”‚                                                                 â”‚
â”‚    â€¢ Distance Score (30 max):                                  â”‚
â”‚      Distance = 0.5 km â†’ Score = 30 âœ“                         â”‚
â”‚                                                                 â”‚
â”‚    â€¢ Availability Score (25 max):                              â”‚
â”‚      45 free / 60 total = 0.75 â†’ Score = 19 âœ“                â”‚
â”‚                                                                 â”‚
â”‚    â€¢ ML Prediction Score (25 max):                             â”‚
â”‚      prob_free Ã— confidence = 0.65 Ã— 0.87 = 0.566             â”‚
â”‚      0.566 Ã— 25 = 14 âœ“                                         â”‚
â”‚                                                                 â”‚
â”‚    â€¢ Price Score (10 max):                                     â”‚
â”‚      â‚¹20/hour is competitive â†’ Score = 8 âœ“                    â”‚
â”‚                                                                 â”‚
â”‚    â€¢ Amenities Score (10 max):                                 â”‚
â”‚      Covered + Security â†’ Score = 10 âœ“                        â”‚
â”‚                                                                 â”‚
â”‚    Total Score = 30 + 19 + 14 + 8 + 10 = 81/100               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Ranking & Response                                           â”‚
â”‚                                                                 â”‚
â”‚    All spots scored, sorted by total score:                    â”‚
â”‚                                                                 â”‚
â”‚    ğŸ¥‡ Rank 1: PICT Campus (Score: 81)                          â”‚
â”‚    ğŸ¥ˆ Rank 2: Sinhagad Mall (Score: 76)                        â”‚
â”‚    ğŸ¥‰ Rank 3: FC Road Complex (Score: 72)                      â”‚
â”‚                                                                 â”‚
â”‚    Return top 3 to user with:                                  â”‚
â”‚    â€¢ All location & distance info                              â”‚
â”‚    â€¢ Current & predicted availability                           â”‚
â”‚    â€¢ Score breakdown                                            â”‚
â”‚    â€¢ Estimated travel time                                      â”‚
â”‚    â€¢ Price & amenities                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE SCHEMA                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     User     â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)      â”‚
    â”‚ clerkId      â”‚
    â”‚ email        â”‚
    â”‚ name         â”‚
    â”‚ phone        â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Vehicle    â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)      â”‚
    â”‚ userId (FK)  â”‚
    â”‚ regNumber    â”‚
    â”‚ ownerName    â”‚
    â”‚ qrCode       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Booking       â”‚ N:1       â”‚  ParkingSpot   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)           â”‚           â”‚ id (PK)        â”‚
    â”‚ userId (FK)       â”‚           â”‚ name           â”‚
    â”‚ vehicleId (FK)    â”‚           â”‚ address        â”‚
    â”‚ parkingSpotId (FK)â”‚           â”‚ latitude       â”‚
    â”‚ parkingSlotId (FK)â”‚           â”‚ longitude      â”‚
    â”‚ bookedStartTime   â”‚           â”‚ totalSpots     â”‚
    â”‚ bookedEndTime     â”‚           â”‚ availableSpots â”‚
    â”‚ baseAmount        â”‚           â”‚ pricePerHour   â”‚
    â”‚ status            â”‚           â”‚ isCovered      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ hasSecurity    â”‚
                                    â”‚ hasEVCharging  â”‚
                                    â”‚ rating         â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â”‚ 1:N
                                             â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  ParkingSlot   â”‚
                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                    â”‚ id (PK)        â”‚
                                    â”‚ spotId (FK)    â”‚
                                    â”‚ slotNumber     â”‚
                                    â”‚ status         â”‚
                                    â”‚ cameraId       â”‚
                                    â”‚ lastUpdated    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Mobile App (React Native)               â”‚
â”‚  Components:                                                 â”‚
â”‚  â€¢ ParkingMap.tsx - Shows parking spots on map              â”‚
â”‚  â€¢ ParkingCard.tsx - Display spot details                   â”‚
â”‚  â€¢ SearchModal.tsx - Destination search                      â”‚
â”‚  â€¢ booking screens - Booking flow                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ API Call: POST /api/recommend-parking
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend: recommendation.route.ts                â”‚
â”‚  â€¢ Validates request parameters                             â”‚
â”‚  â€¢ Calls controller                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Backend: recommendation.controller.ts               â”‚
â”‚  â€¢ Extracts request data                                     â”‚
â”‚  â€¢ Calls service layer                                       â”‚
â”‚  â€¢ Formats response                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Backend: recommendation.service.ts                  â”‚
â”‚  Main Logic:                                                 â”‚
â”‚  1. findNearbyParkingSpots() â†’ geospatial.service          â”‚
â”‚  2. getRealTimeSlotStatus() â†’ Prisma DB query               â”‚
â”‚  3. predictBatch() â†’ ml.service                             â”‚
â”‚  4. calculateRecommendationScore() â†’ scoring algorithm       â”‚
â”‚  5. Sort and return top 3                                    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                  â”‚                  â”‚
      â”‚                  â”‚                  â”‚
      â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚geospatialâ”‚    â”‚ ml.service  â”‚    â”‚   Prisma DB   â”‚
â”‚.service  â”‚    â”‚             â”‚    â”‚   (Postgres)  â”‚
â”‚          â”‚    â”‚  HTTP â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–ºâ”‚               â”‚
â”‚ Haversineâ”‚    â”‚  client     â”‚    â”‚  ParkingSpot  â”‚
â”‚ POI data â”‚    â”‚             â”‚    â”‚  ParkingSlot  â”‚
â”‚ Weather  â”‚    â”‚             â”‚    â”‚  Booking      â”‚
â”‚ Events   â”‚    â”‚             â”‚    â”‚  User         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ POST /predict/batch
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ML Service     â”‚
              â”‚  (Flask)        â”‚
              â”‚  app.py         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ml_predictor   â”‚
              â”‚  .py            â”‚
              â”‚                 â”‚
              â”‚  â€¢ Load model   â”‚
              â”‚  â€¢ Preprocess   â”‚
              â”‚  â€¢ Predict      â”‚
              â”‚  â€¢ Return probs â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  XGBoost Model  â”‚
              â”‚  parking_model  â”‚
              â”‚  _v2.json       â”‚
              â”‚                 â”‚
              â”‚  Features:      â”‚
              â”‚  â€¢ slot_type    â”‚
              â”‚  â€¢ hour/weekday â”‚
              â”‚  â€¢ weather      â”‚
              â”‚  â€¢ event_type   â”‚
              â”‚  â€¢ POI counts   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
parkingPrediction/
â”‚
â”œâ”€â”€ ğŸ“Š ML Model Files (trained model)
â”‚   â”œâ”€â”€ parking_model_v2.json
â”‚   â”œâ”€â”€ parking_model_data_v2.joblib
â”‚   â””â”€â”€ pune_parking_hyper_realistic.csv
â”‚
â”œâ”€â”€ ğŸ¤– ml_service/ (Python Flask microservice)
â”‚   â”œâ”€â”€ ml_predictor.py       # Core ML logic
â”‚   â”œâ”€â”€ app.py                # Flask API server
â”‚   â”œâ”€â”€ requirements.txt      # Python dependencies
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ ğŸŒ backend/ (Node.js TypeScript API)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.ts         # Express server entry
â”‚   â”‚   â”œâ”€â”€ services/         # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ ml.service.ts           # ML client
â”‚   â”‚   â”‚   â”œâ”€â”€ geospatial.service.ts   # Geo calculations
â”‚   â”‚   â”‚   â””â”€â”€ recommendation.service.ts # Main engine
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”‚   â”œâ”€â”€ recommendation/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ recommendation.controller.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ recommendation.route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ parkingSpot/  # Parking management
â”‚   â”‚   â”‚   â”œâ”€â”€ booking/      # Booking system
â”‚   â”‚   â”‚   â”œâ”€â”€ vehicle/      # Vehicle verification
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/         # Authentication
â”‚   â”‚   â”‚   â””â”€â”€ wallet/       # Payment wallet
â”‚   â”‚   â””â”€â”€ middlewares/      # Express middleware
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma     # Database schema
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ seed-parking-spots.ts  # Data seeder
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“± uber-clone/ (React Native mobile app)
â”‚   â”œâ”€â”€ app/                  # Screens
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ParkingMap.tsx
â”‚   â”‚   â””â”€â”€ ParkingCard.tsx
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ parking.ts        # Parking API client
â”‚
â”œâ”€â”€ ğŸ› ï¸ Scripts (automation)
â”‚   â”œâ”€â”€ start-services.sh     # Start all services
â”‚   â”œâ”€â”€ stop-services.sh      # Stop all services
â”‚   â””â”€â”€ test-integration.sh   # Run tests
â”‚
â””â”€â”€ ğŸ“š Documentation
    â”œâ”€â”€ README_SMART_PARKING.md     # Main overview
    â”œâ”€â”€ SETUP_GUIDE.md              # Setup instructions
    â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md   # What was built
    â””â”€â”€ ARCHITECTURE.md             # This file
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TECHNOLOGY STACK                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile App:
  â€¢ React Native
  â€¢ Expo
  â€¢ TypeScript
  â€¢ React Navigation
  â€¢ Google Maps API

Backend API:
  â€¢ Node.js 18+
  â€¢ TypeScript
  â€¢ Express.js
  â€¢ Prisma ORM
  â€¢ Axios (HTTP client)
  â€¢ Swagger/OpenAPI

ML Service:
  â€¢ Python 3.8+
  â€¢ Flask
  â€¢ XGBoost
  â€¢ Pandas
  â€¢ NumPy
  â€¢ Scikit-learn
  â€¢ Joblib

Database:
  â€¢ PostgreSQL 14+
  â€¢ Prisma migrations

DevOps:
  â€¢ Bash scripts
  â€¢ npm scripts
  â€¢ Git

Testing:
  â€¢ curl (API testing)
  â€¢ Integration tests
  â€¢ Swagger UI
```

## Deployment Architecture (Production)

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Load Balancerâ”‚
                  â”‚   (Nginx)    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend 1 â”‚  â”‚ Backend 2 â”‚  â”‚Backend 3 â”‚
    â”‚  (Node.js)â”‚  â”‚  (Node.js)â”‚  â”‚(Node.js) â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚              â”‚              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ML Service1â”‚  â”‚ML Service2â”‚  â”‚ML Serviceâ”‚
    â”‚  (Flask)  â”‚  â”‚  (Flask)  â”‚  â”‚ (Flask)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     PostgreSQL Primary               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Replica1 â”‚  â”‚  Replica2 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Redis Cache                  â”‚
    â”‚  (for frequent recommendations)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

_Last Updated: November 8, 2025_
